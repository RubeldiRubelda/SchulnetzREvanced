/* styles.css - Basis-Styles für Modifikationen */

:root {
    --accent: #9c27b0; /* Default Schulnetz Violet approx or custom */
    --accent-hover: #ba68c8;
}

/* Logo initial verstecken, um das Flackern zu verhindern */
/* Wir machen das nur, wenn wir noch nicht wissen, ob wir deaktiviert sind */
img.cls-page--header-row--sn-logo:not(.revanced-ready) {
    opacity: 0;
}

/* Wenn REvanced aktiv ist und das Logo getauscht wurde, zeigen */
body.revanced-active img.cls-page--header-row--sn-logo {
    opacity: 1;
    transition: opacity 0.1s ease-in;
}

/* Falls REvanced deaktiviert ist, Logo sofort zeigen */
body.revanced-disabled img.cls-page--header-row--sn-logo {
    opacity: 1;
}

/* DARK MODE IMPLEMENTATION - HIGH QUALITY */
html.revanced-dark {
    --bg-deep: #121212;
    --bg-surface: #1e1e1e;
    --bg-card: #252525;
    --text-primary: #e0e0e0;
    --text-secondary: #aaaaaa;
    --border: #333333;
    --table-row-hover: #2a2a2a;
}

html.revanced-dark body {
    background-color: var(--bg-deep) !important;
    color: var(--text-primary) !important;
}

/* Header & Navigation */
html.revanced-dark .cls-page--header, 
html.revanced-dark .mdl-layout__header,
html.revanced-dark .titelleiste,
html.revanced-dark .header-menu {
    background-color: var(--bg-surface) !important;
    color: var(--text-primary) !important;
    border-bottom: 1px solid var(--border) !important;
}

html.revanced-dark .cls-page--header-row--logo-span {
    background-color: var(--bg-surface) !important;
}

html.revanced-dark .cls-page--header-row,
html.revanced-dark .mdl-layout__header-row {
    background-color: var(--bg-surface) !important;
    color: var(--text-primary) !important;
}

/* Side Drawer (Seitenmenü) */
html.revanced-dark .mdl-layout__drawer,
html.revanced-dark #nav-drawer,
html.revanced-dark .cls-page--navlist,
html.revanced-dark #navigation-list {
    background-color: var(--bg-surface) !important;
    color: var(--text-primary) !important;
    border-right: 1px solid var(--border) !important;
}

html.revanced-dark .cls-page--mainnav-small {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border-bottom: 1px solid var(--border) !important;
}

html.revanced-dark .cls-page--leftmenu-active {
    background-color: var(--table-row-hover) !important;
    border-left: 3px solid var(--accent) !important;
}

html.revanced-dark .cls-page--navlist-spacer-bottom {
    background-color: var(--bg-surface) !important;
}

html.revanced-dark .mdl-navigation__link {
    color: var(--text-secondary) !important;
}

html.revanced-dark .mdl-navigation__link:hover {
    background-color: var(--table-row-hover) !important;
    color: var(--accent) !important;
}

html.revanced-dark .cls-page--mainmenu-element {
    color: var(--text-secondary) !important;
}

html.revanced-dark .cls-page--mainmenu-active {
    color: var(--accent) !important;
    border-bottom: 2px solid var(--accent) !important;
}

html.revanced-dark .cls-page--mainmenu-element:hover {
    color: var(--accent-hover) !important;
}

/* Gradient & Spacers */
html.revanced-dark .cls-page--header-row--logo-gradient {
    display: none !important; /* Entfernt den hellen Verlauf */
}

/* Main Content Area */
html.revanced-dark main, 
html.revanced-dark .mdl-layout__content, 
html.revanced-dark .cls-page--content-container {
    background-color: var(--bg-deep) !important;
}
/* --- LANDINGPAGE STYLES --- */
body.revanced-landingpage {
    background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%) !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    min-height: 100vh !important;
    margin: 0 !important;
    font-family: 'Inter', 'Segoe UI', system-ui, sans-serif !important;
}

body.revanced-landingpage > div {
    position: static !important;
    margin-left: 0 !important;
    top: auto !important;
    width: 95% !important;
    max-width: 1000px !important;
    animation: revanced-fade-in 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

.revanced-landing-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 25px;
    gap: 8px;
    position: relative;
}

.revanced-logo-glow {
    position: absolute;
    width: 100px;
    height: 100px;
    background: var(--accent);
    filter: blur(50px);
    opacity: 0.2;
    z-index: -1;
    border-radius: 50%;
}

.revanced-landing-header h1 {
    color: white;
    font-size: 1.8rem;
    margin: 0;
    font-weight: 500;
    text-shadow: 0 4px 10px rgba(0,0,0,0.3);
    letter-spacing: -0.5px;
}

.revanced-tagline {
    color: #94a3b8;
    font-size: 0.95rem;
    margin: 0;
    opacity: 0.8;
}

/* Footer Section */
.revanced-landing-footer {
    margin-top: 40px;
    padding-top: 30px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.footer-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
}

.footer-item h3 {
    color: var(--accent);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
}

.footer-item p, .footer-item a {
    color: #94a3b8;
    font-size: 0.85rem;
    line-height: 1.4;
    text-decoration: none;
    margin: 0;
}

.footer-item a:hover {
    color: white;
    text-decoration: underline;
}

@media (max-width: 600px) {
    .footer-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
}

body.revanced-landingpage div[style*="background-color: #5e80bb"] {
    background: rgba(30, 41, 59, 0.7) !important;
    backdrop-filter: blur(16px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 20px !important;
    padding: 30px !important;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5) !important;
    width: 95% !important;
    max-width: 1100px !important;
    margin: 40px auto !important;
    height: auto !important;
}

body.revanced-landingpage table,
body.revanced-landingpage tbody {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: wrap !important;
    gap: 30px !important;
    width: 100% !important;
    justify-content: flex-start !important;
    align-items: flex-start !important;
}

body.revanced-landingpage tr:has(ul) {
    display: block !important;
    flex: 1 !important;
    min-width: 280px !important;
}

body.revanced-landingpage tr:not(:has(ul)) {
    display: none !important;
}

@media (max-width: 900px) {
    body.revanced-landingpage tr:has(ul) {
        flex: 1 1 100% !important;
    }
}

body.revanced-landingpage td {
    display: block !important;
    width: 100% !important;
}

body.revanced-landingpage b {
    color: var(--accent) !important;
    font-size: 0.85rem !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 1.1px !important;
    margin-bottom: 10px !important;
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
}

body.revanced-landingpage b::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, var(--accent), transparent);
}

body.revanced-landingpage ul {
    list-style: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

body.revanced-landingpage a {
    color: #cbd5e1 !important;
    font-size: 0.85rem !important;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
    display: block !important;
    padding: 6px 12px !important;
    border-radius: 8px !important;
    background: rgba(255, 255, 255, 0.03) !important;
    border: 1px solid rgba(255, 255, 255, 0.05) !important;
    margin-bottom: 4px !important;
}

body.revanced-landingpage a:hover {
    background: rgba(255, 255, 255, 0.08) !important;
    border-color: var(--accent) !important;
    color: white !important;
    transform: translateY(-2px) scale(1.02) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
}

@keyframes revanced-fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
/* Tables - Die Notenliste etc. */
html.revanced-dark .mdl-data-table {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border) !important;
}

html.revanced-dark .mdl-data-table thead,
html.revanced-dark .mdl-data-table thead tr,
html.revanced-dark .mdl-data-table thead th {
    background-color: var(--bg-surface) !important;
    color: var(--accent) !important;
    border-bottom: 1px solid var(--border) !important;
}

html.revanced-dark .mdl-data-table tbody tr {
    border-top: 1px solid var(--border) !important;
}

html.revanced-dark .mdl-data-table tbody tr:hover {
    background-color: var(--table-row-hover) !important;
}

html.revanced-dark .mdl-data-table td {
    color: var(--text-primary) !important;
    border-bottom: 1px solid var(--border) !important;
}

/* Cards & Containers */
html.revanced-dark .mdl-card, 
html.revanced-dark .cls-card {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border) !important;
}

html.revanced-dark .mdl-card__title, 
html.revanced-dark .mdl-card__supporting-text {
    color: var(--text-primary) !important;
}

/* Buttons & Inputs */
html.revanced-dark .mdl-button {
    color: var(--text-primary) !important;
}

html.revanced-dark .mdl-button--colored {
    color: var(--accent) !important;
}

html.revanced-dark input, 
html.revanced-dark select, 
html.revanced-dark textarea {
    background-color: #2d2d2d !important;
    color: white !important;
    border: 1px solid var(--border) !important;
    padding: 4px 8px !important;
}

/* Icons & Logo */
html.revanced-dark .cls-page--header-row--sn-logo {
    /* Logo wird meistens durch JS getauscht, hier trotzdem Filter falls nötig */
    filter: drop-shadow(0 0 2px rgba(255,255,255,0.2));
}

html.revanced-dark .far, 
html.revanced-dark .fas, 
html.revanced-dark .fal {
    color: var(--text-secondary) !important;
}

html.revanced-dark .cls-page--mainmenu-active .fas,
html.revanced-dark .cls-page--mainmenu-active .far {
    color: var(--accent) !important;
}

/* Scrollbars - Chrome/Edge */
html.revanced-dark ::-webkit-scrollbar {
    width: 10px;
}
html.revanced-dark ::-webkit-scrollbar-track {
    background: var(--bg-deep);
}
html.revanced-dark ::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 5px;
}
html.revanced-dark ::-webkit-scrollbar-thumb:hover {
    background: #444;
}

/* Menüs und Popups */
html.revanced-dark .mdl-menu__container,
html.revanced-dark .mdl-menu,
html.revanced-dark .mdl-menu__item {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
}

html.revanced-dark .mdl-menu__item:hover {
    background-color: var(--table-row-hover) !important;
}

/* Tooltips */
html.revanced-dark .mdl-tooltip {
    background-color: #444 !important;
    color: white !important;
}

/* Dialoge */
html.revanced-dark .mdl-dialog {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border) !important;
    box-shadow: 0 0 20px rgba(0,0,0,0.5) !important;
}

/* Startseite spezifisch */
html.revanced-dark #logo-span {
    background-color: transparent !important;
}

html.revanced-dark .timer-holder svg circle {
    stroke: var(--accent) !important;
}

html.revanced-dark .timer-value {
    color: var(--text-primary) !important;
}

/* STUNDENPLAN / SCHEDULER DARK MODE */
html.revanced-dark .dhx_cal_container,
html.revanced-dark .dhx_cal_data,
html.revanced-dark .dhx_cal_header {
    background-color: var(--bg-deep) !important;
    color: var(--text-primary) !important;
}

/* Gitterlinien und Skalen */
html.revanced-dark .dhx_scale_bar {
    background-color: var(--bg-surface) !important;
    color: var(--text-secondary) !important;
    border-left: 1px solid var(--border) !important;
    border-bottom: 1px solid var(--border) !important;
}

html.revanced-dark .dhx_scale_holder,
html.revanced-dark .dhx_scale_holder_now {
    background-color: var(--bg-deep) !important;
    background-image: none !important; 
    border-right: 1px solid var(--border) !important;
}

/* Zeitspalte links und Monatsansicht */
html.revanced-dark .dhx_month_head,
html.revanced-dark .dhx_month_body {
    background-color: var(--bg-card) !important;
    border-right: 1px solid var(--border) !important;
    border-bottom: 1px solid var(--border) !important;
    color: var(--text-secondary) !important;
}

/* Events im Stundenplan */
html.revanced-dark .dhx_cal_event div {
    filter: saturate(0.8) brightness(0.9);
    border-color: rgba(0,0,0,0.2) !important;
}

html.revanced-dark .dhx_cal_event .dhx_body,
html.revanced-dark .dhx_cal_event .dhx_title,
html.revanced-dark .dhx_cal_event .dhx_footer {
    color: white !important;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

/* Tabs (Tag, Woche, Monat) */
html.revanced-dark .dhx_cal_tab {
    background-color: var(--bg-surface) !important;
    border: 1px solid var(--border) !important;
    color: var(--text-secondary) !important;
}

html.revanced-dark .dhx_cal_tab.active {
    background-color: var(--accent) !important;
    color: white !important;
}

/* Heute Button und Navi-Pfeile */
html.revanced-dark .dhx_cal_today_button,
html.revanced-dark .dhx_cal_prev_button,
html.revanced-dark .dhx_cal_next_button {
    background-color: var(--bg-surface) !important;
    border: 1px solid var(--border) !important;
    color: var(--text-primary) !important;
}

/* Spezifische Schulnetz Terminknöpfe (STUNDENPLAN, TERMINE, PRÜFUNGEN) */
html.revanced-dark .header-for-page-actions h2 {
    color: var(--accent) !important;
}

html.revanced-dark .mdl-button.mdl-button--raised.mdl-button--colored {
    background-color: var(--accent) !important;
    color: white !important;
}

/* Spezifische Fixes für Schulnetz Startseiten-Elemente */
html.revanced-dark .tabletitle, 
html.revanced-dark h3,
html.revanced-dark p,
html.revanced-dark span,
html.revanced-dark b {
    color: var(--text-primary);
}

html.revanced-dark .tabletitle, 
html.revanced-dark h3 {
    color: var(--accent) !important;
}

html.revanced-dark #footer {
    display: none !important;
}

/* HANDY QR CODE AUSBLENDEN */
/* Wir verstecken den Bereich auf der Startseite, da er nun im Addon ist */
#qrimage_pwa_appstore,
#qrimage_pwa,
img.cls-page--login-qr-code,
img[src*="qr_img.php"],
.cls-page--home-column img[src*="qrcode"] {
    display: none !important;
    opacity: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
}

/* NOTEN AUSBLENDEN (Grade Hider) */
.revanced-grade-hidden {
    filter: blur(5px) grayscale(1);
    cursor: pointer;
    background-color: rgba(0,0,0,0.1);
    border-radius: 4px;
    padding: 0 4px;
    display: inline-block;
    transition: filter 0.3s ease, background-color 0.3s ease;
    user-select: none;
}

.revanced-grade-hidden:hover {
    filter: blur(3px) grayscale(0.5);
    background-color: rgba(0,0,0,0.05);
}

.revanced-grade-visible {
    filter: blur(0px) grayscale(0) !important;
    background-color: transparent !important;
    cursor: default !important;
}

/* WARNFARBEN FÜR SCHLECHTE NOTEN (< 4.0) */
/* Maximale Spezifität, um gegen alle anderen Styles zu gewinnen */
body.revanced-active .revanced-grade-warning-softred,
body.revanced-active td.revanced-grade-warning-softred,
body.revanced-active span.revanced-grade-warning-softred {
    color: #ff8a80 !important; /* Soft Red */
    font-weight: bold !important;
}

body.revanced-active .revanced-grade-warning-alarmred,
body.revanced-active td.revanced-grade-warning-alarmred,
body.revanced-active span.revanced-grade-warning-alarmred {
    color: #ff1744 !important; /* Alarm Red */
    font-weight: bold !important;
    text-shadow: 0 0 5px rgba(255, 23, 68, 0.4);
}

body.revanced-active .revanced-grade-warning-darkred,
body.revanced-active td.revanced-grade-warning-darkred,
body.revanced-active span.revanced-grade-warning-darkred {
    color: #b71c1c !important; /* Dark Red */
    font-weight: 900 !important;
}
